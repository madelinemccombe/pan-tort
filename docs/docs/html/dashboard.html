

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using the Kibana dashboard and Elasticsearch &mdash; pan-tort 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Release History" href="release_history.html" />
    <link rel="prev" title="Interpreting the Results" href="output_results.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pan-tort
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Prerequisites and Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_pantort.html">Using pan-tort</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_results.html">Interpreting the Results</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using the Kibana dashboard and Elasticsearch</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#access-kibana">Access Kibana</a></li>
<li class="toctree-l2"><a class="reference internal" href="#importing-searches-visualizations-and-dashboards">Importing Searches, Visualizations, and Dashboards</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-the-pan-tort-dashboard">Accessing the pan-tort dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-search-bar-to-filter-results">Using the Search bar to filter results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#elasticsearch-quick-loads-and-deletes">Elasticsearch quick loads and deletes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sample-data-bulk-load">Sample data bulk load</a></li>
<li class="toctree-l3"><a class="reference internal" href="#elasticsearch-delete-by-query-example">Elasticsearch delete by query example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-existing-data-in-the-index">Delete existing data in the index</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release_history.html">Release History</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pan-tort</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Using the Kibana dashboard and Elasticsearch</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/dashboard.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-the-kibana-dashboard-and-elasticsearch">
<h1>Using the Kibana dashboard and Elasticsearch<a class="headerlink" href="#using-the-kibana-dashboard-and-elasticsearch" title="Permalink to this headline">¶</a></h1>
<p>Kibana is a simple visualization tool that pulls from an Elasticsearch data store.</p>
<div class="section" id="access-kibana">
<h2>Access Kibana<a class="headerlink" href="#access-kibana" title="Permalink to this headline">¶</a></h2>
<p>Kibana is accessed through a web interface, typically on port 5601. Accessing on a local machine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">5601</span>
</pre></div>
</div>
</div>
<div class="section" id="importing-searches-visualizations-and-dashboards">
<h2>Importing Searches, Visualizations, and Dashboards<a class="headerlink" href="#importing-searches-visualizations-and-dashboards" title="Permalink to this headline">¶</a></h2>
<p>The pan-tort Kibana files are kept in the kibana_json folder. The 3 files can be easily imported to Kibana
to be data view ready.</p>
<p>Import is found under Management –&gt; Saved Objects. The Import button in the upper right corner.</p>
<img alt="_images/kibana_import.png" src="_images/kibana_import.png" />
<p>Import the 3 files in the following order to ensure no reference errors:</p>
<blockquote>
<div><ol class="arabic simple">
<li>hash_data_searches.json</li>
<li>hash_data_visualizations.json</li>
<li>hash_data_dashboards.json</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="accessing-the-pan-tort-dashboard">
<h2>Accessing the pan-tort dashboard<a class="headerlink" href="#accessing-the-pan-tort-dashboard" title="Permalink to this headline">¶</a></h2>
<p>Use the Kibana menu to choose the dashboard option.</p>
<a class="reference internal image-reference" href="_images/kibana_menu.png"><img alt="_images/kibana_menu.png" class="align-center" src="_images/kibana_menu.png" style="width: 177.0px; height: 296.0px;" /></a>
<p>Select <code class="docutils literal notranslate"><span class="pre">`pan_tort_dashboard`</span></code></p>
<p>The pan-tort dashboard will display.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The data is time based and some test samples may be 6 years old. If the dashboard is not set to look back
that far in time, update with the time selector in the upper right hand corner. The best option is to choose
<code class="docutils literal notranslate"><span class="pre">`Relative`</span></code> and use 6 <code class="docutils literal notranslate"><span class="pre">`Years</span> <span class="pre">Ago`</span></code> to <code class="docutils literal notranslate"><span class="pre">`Now`</span></code></p>
</div>
</div>
<div class="section" id="using-the-search-bar-to-filter-results">
<h2>Using the Search bar to filter results<a class="headerlink" href="#using-the-search-bar-to-filter-results" title="Permalink to this headline">¶</a></h2>
<p>When you run pan-tort, you are asked for a brief name for the query. This name is added to the data records.
In the search bar, text box above the dashboard, enter the query name.</p>
<a class="reference internal image-reference" href="_images/kibana_search.png"><img alt="_images/kibana_search.png" class="align-center" src="_images/kibana_search.png" style="width: 430.0px; height: 164.0px;" /></a>
<p>This will filter the results to include on the specific query.</p>
<p>To switch between various queries, simple type in the name in the search box and the dashboard will udpate.</p>
</div>
<div class="section" id="elasticsearch-quick-loads-and-deletes">
<h2>Elasticsearch quick loads and deletes<a class="headerlink" href="#elasticsearch-quick-loads-and-deletes" title="Permalink to this headline">¶</a></h2>
<p>Elasticsearch is the document storage layer used with Kibana presentation. This is not intended as an Elasticsearch
tutorial, but only to give quick commands for adding and remove bulk sets of data.</p>
<div class="section" id="sample-data-bulk-load">
<h3>Sample data bulk load<a class="headerlink" href="#sample-data-bulk-load" title="Permalink to this headline">¶</a></h3>
<p>The output of pan-tort used for Elasticsearch is in the out_estack directory. This is data is json formatted
with data lines preceded by an index line to feed into Elasticsearch.</p>
<p>The general format to add data into Elasticsearch is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -s -XPOST <span class="s1">&#39;http://localhost:9200/_bulk&#39;</span> --data-binary @<span class="o">{</span>filename<span class="o">}</span>.json -H <span class="s2">&quot;Content-Type: application/x-ndjson&quot;</span>
</pre></div>
</div>
<p>If in the hash directory running pan-tort, then the curl command for a filename of pan_tort_sample would be:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -s -XPOST <span class="s1">&#39;http://localhost:9200/_bulk&#39;</span> --data-binary @out_estack/pan_tort_sample.json -H <span class="s2">&quot;Content-Type: application/x-ndjson&quot;</span>
</pre></div>
</div>
<p>Files are loaded using the same pan-tort index and unique per query run using the query name.</p>
</div>
<div class="section" id="elasticsearch-delete-by-query-example">
<h3>Elasticsearch delete by query example<a class="headerlink" href="#elasticsearch-delete-by-query-example" title="Permalink to this headline">¶</a></h3>
<p>In some cases data may be entered as a duplicate or by accident. Using the dev tools option in Elasticsearch,
data can be removed from the index specific to the query name.</p>
<p>The dev tools console is accessed from the main menu. Add the POST statement per below with the update query_tag
name. Then hit the green play button to execute the POST. The results are displayed in the output window.</p>
<img alt="_images/kibana_delete.png" src="_images/kibana_delete.png" />
<p>The example below can be cut-and-paste into the dev tools window with the query_tag updated for data to be deleted.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>POST hash-data/_delete_by_query
<span class="o">{</span>
        <span class="s2">&quot;size&quot;</span>: <span class="m">10000</span>,
        <span class="s2">&quot;_source&quot;</span>: <span class="s2">&quot;query_tag&quot;</span>,
<span class="s2">&quot;query&quot;</span>: <span class="o">{</span>
        <span class="s2">&quot;match&quot;</span> : <span class="o">{</span>
            <span class="s2">&quot;query_tag&quot;</span> : <span class="s2">&quot;pan_tort_sample&quot;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The delete_by_query command can be executed for each query_tag value.</p>
<p>If all data is to be removed for a clean index, use the curl command below. This will delete ALL
data in the hash-data index store so proceed with caution.</p>
</div>
<div class="section" id="delete-existing-data-in-the-index">
<h3>Delete existing data in the index<a class="headerlink" href="#delete-existing-data-in-the-index" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>::</dt>
<dd>curl -XDELETE <a class="reference external" href="http://localhost:9200">http://localhost:9200</a>/{{elk_index_name}}</dd>
</dl>
<p>Pan-tort uses the index name of <code class="docutils literal notranslate"><span class="pre">`hash-data`</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This command deletes ALL data in the index. Use only to reset to a clean data store.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This command deletes ALL data in the index. Use only to reset to a clean data store.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release_history.html" class="btn btn-neutral float-right" title="Release History" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="output_results.html" class="btn btn-neutral" title="Interpreting the Results" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Scott Shoaf.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>